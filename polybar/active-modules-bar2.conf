;=====================================================
;     Active Modules bar2
;=====================================================

[module/caps_lock]
type = internal/xkeyboard
format-padding = 1
format = <label-indicator>
label-indicator-on = %icon%
label-indicator-off = %icon%
indicator-icon-0 = caps lock;;
label-indicator-on-capslock = %icon%
label-indicator-off-capslock = %icon%
label-indicator-off-capslock-foreground = ${colors.green}
label-indicator-on-capslock-foreground = ${colors.red}

[module/mpd-label]
type = custom/text
content = "    "
content-foreground = ${xresources.mag}
content-padding = 1

[module/mpd]
type = internal/mpd
format-online = <label-song> | <label-time>
format-offline = <label-offline>
format-padding = 2
label-padding = 1
label-offline = mpd is off
label-song = %title%
label-song-foreground = ${xresources.foreground}
label-time = %elapsed% / %total%
label-time-foreground = ${xresources.foreground}

[module/cmus-ipc]
; can be used combined with ncmpcpp via '$HOME/bin/mpd_status'
type = custom/ipc
hook-0 = cat $HOME/.config/cmus/cmus_output
initial = 1
format = <output>
format-maxlen = 0
format-foreground = ${xresources.foreground}
;format-prefix = " "
;format-prefix-foreground = ${xresources.mag}
format-padding = 1

[module/vu-meters]
type = custom/script
tail = true
format = "<label> "
label-foreground = ${xresources.background}
format-prefix = " : "
format-prefix-foreground = ${xresources.mag}
exec = vu_meter.py

[module/recording-ipc-2]
type = custom/ipc
hook-0 = cat $XDG_RUNTIME_DIR/recordingicon
hook-1 = echo ""
initial = 2
format-padding = 3
format = <output>
format-foreground = ${colors.yellow}
click-left = rofi-record &

[module/chrono-ipc-2]
type = custom/ipc
hook-0 = cat "$XDG_CACHE_HOME"/chrono.txt
hook-1 = echo ""
initial = 2
format-padding = 1
format = <output>
format-foreground = ${colors.yellow}
click-left = rofi-record &

[module/polybar-config]
type = custom/menu
format-spacing = 1
label-padding = 2
label-open = "    "
label-open-foreground = ${xresources.blu}
label-close = "    "
label-close-foreground = ${xresources.red}
label-separator = " | "
# Top level

menu-0-0 = " bars configs: "
menu-0-0-exec = menu-open-0
menu-0-0-foreground = ${xresources.blu}
menu-0-1 = "  "
menu-0-1-foreground = ${xresources.red}
menu-0-1-exec = $EDITOR ~/.config/polybar/config
menu-0-2 = "  "
menu-0-2-foreground = ${xresources.grn}
menu-0-2-exec = $EDITOR ~/.config/polybar/bars.conf
menu-0-3 = "  "
menu-0-3-foreground = ${xresources.ylw}
menu-0-3-exec = $EDITOR ~/.config/polybar/active-modules-bar1.conf
menu-0-4 = "  "
menu-0-4-foreground = ${xresources.blu}
menu-0-4-exec = $EDITOR ~/.config/polybar/active-modules-bar2.conf
menu-0-5 = "  "
menu-0-5-foreground = ${xresources.mag}
menu-0-5-exec = $EDITOR ~/.config/polybar/active-modules-bar3.conf

[module/pulseaudio-ipc]
type = custom/ipc
hook-0 = echo "%{F#FF4747}%{F-}  $(pactl get-sink-volume 1 | awk '{if(NR!=2) {print $5}}')"
hook-1 = echo "%{F$(xrdb -query | awk '/color10:/{print $NF}')}%{F-}  $(pactl get-sink-volume @DEFAULT_SINK@ | awk '{if(NR!=2) {print $5}}')"
initial = 2
format = <output>
format-padding = 1
format-foreground = ${colors.yellow}
click-left = urxvtc -name pulsemixer -e pulsemixer &
click-right = pulseaudio_control --sink toggle &

[module/mic-ipc]
type = custom/ipc
hook-0 = echo "%{F#FF4747}%{F-}  $(pactl get-source-volume 1 | awk '{if(NR!=2) {print $5}}' | sed 's/^0%/muted/')"
hook-1 = echo "%{F$(xrdb -query | awk '/color10:/{print $NF}')}%{F-}  $(pactl get-source-volume @DEFAULT_SOURCE@ | awk '{if(NR!=2) {print $5}}')"
initial = 1
format = <output>
format-padding = 1
format-foreground = ${colors.yellow}
click-left = polybar-msg hook mic-ipc 1
click-right = pulseaudio_control --source toggle &

[module/time]
type = internal/date
interval = 1
label = %date% %time%
label-foreground = ${xresources.foreground}
date =
date-alt = " %a %b %d, %Y -"
time = %H:%M:%S
time-alt = %H:%M:%S
;format-prefix =" "
format-prefix =" "
format-prefix-foreground = ${xresources.mag}
format-padding = 1
